import{PageLessComponent}from"./PageLess.min.js";export class PageLessModal{constructor(s=null){this.modalHolder=document.body,this.name=s,this.modal=null}push(){return void 0===window.PageLessModal&&(window.PageLessModal=PageLessModal),null==PageLessModal.Holder&&(PageLessModal.Holder=this.modalHolder),new Promise(s=>{if(Object.getPrototypeOf(this).hasOwnProperty(this.name))if(this[this.name](),this.modal instanceof PageLessComponent){let t=this.modal.finalView.setData;this.modal.finalView.PageLessModal=this,this.modal.finalView.setData=s=>(this.modal.finalView=t.call(this.modal.finalView,s),this.modalHolder.append(this.modal.finalView),this.modal.finalView),this.modalHolder.append(this.modal.finalView),s(this.modal.finalView)}else this.modalHolder=this.modalHolder,this.modalHolder.append(this.modal),s(this.modal)})}close(){this.modal instanceof PageLessComponent?this.modal.finalView.querySelector(".custom-modal-close-button").click():this.modal.querySelector(".custom-modal-close-button").click()}static Open(s){if(void 0===window.PageLessModal&&(window.PageLessModal=PageLessModal),null==PageLessModal.Holder&&(PageLessModal.Holder=document.body),null==PageLessModal.Holder||null==PageLessModal.Holder)throw"Cannot append modal to a null holder";{let t=s.querySelectorAll(".custom-modal-close-button"),e=s.querySelectorAll(".close-modal");t.length>=1&&t.forEach(t=>{t.addEventListener("click",()=>{PageLessModal.Close(s)})}),e.length>=1&&e.forEach(t=>{t.addEventListener("click",()=>{PageLessModal.Close(s)})}),s.addEventListener("click",t=>{let e;t.target.classList.contains("closable")&&PageLessModal.Close(s)}),PageLessModal.Holder.appendChild(s)}}static Close(s){let t=s.querySelector(".custom-modal");null!=t&&t.classList.add("custom-modal-close"),setTimeout(()=>{s.remove()},250)}static Confirmation(s,t){return new Promise((e,n)=>{PageLessModal.Open(new PageLessComponent("confirmation-modal",{data:{title:s,msg:t},props:{onyesclick:function(){e(!0),PageLessModal.Close(this.parentComponent)},onnoclick:function(){n(!0),PageLessModal.Close(this.parentComponent)}},view:function(){return`\n                        <div class="custom-modal-container p-2 closable">\n                            <div class="col-12 com-sm-12 col-md-8 col-lg-8 col-xl-5 custom-modal">\n            \n                                <div class="row modal-header-container p-3">\n                                    <div class="col-12 custom-modal-header ">\n                                        <span class="h5"><span class="fad fa-exclamation-triangle text-t-blue"></span>&emsp;<span class="title">${this.title}</span></span>\n                                        <button class="btn-circle text-danger custom-modal-close-button d-none"><i class="fa fa-times"></i></button>\n                                    </div>\n                                </div>\n            \n                                <div class="row custom-modal-body p-2 pt-0 pb-0">\n                                    <div class="col-12">\n                                        <div class="row p-3" >\n                                            <div class="flex-1">\n                                                <div class="col-12">\n                                                    <div class="row pb-2">\n                                                        <p class="msg">${this.msg}</p>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n            \n                                        <div class="row justify-content-end pt-3">\n                                            <pageless-button type="button" class="btn btn-light mr-3 col-5 col-sm-3 col-md-3 close-modal" onclick="{{this.props.onnoclick}}" text="No"></pageless-button>\n                                            <pageless-button onclick="{{this.props.onyesclick}}" type="button" classname="btn btn-primary col-5 col-sm-3 col-md-3 confirm" text="Yes"></pageless-button>\n                                        </div>\t            \t\t\t\t\t\t\t\t\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    `}}).view())})}static Success(s,t){return new Promise(e=>{PageLessModal.Open(new PageLessComponent("success-modal",{data:{title:s,msg:t},view:function(){return`\n                        <div class="custom-modal-container p-2">\n                            <div class="col-12 com-sm-12 col-md-8 col-lg-8 col-xl-5 custom-modal">\n    \n                                <div class="row modal-header-container p-3">\n                                    <div class="col-12 custom-modal-header ">\n                                        <span class="h5"><span class="fad fa-shield-check text-t-blue"></span>&emsp;<span class="title">${this.title}</span></span>\n                                        <button class="btn-circle btn-clean text-danger custom-modal-close-button d-none"><i class="fa fa-times"></i></button>\n                                    </div>\n                                </div>\n    \n                                <div class="row custom-modal-body p-2 pt-0 pb-0">\n                                    <div class="col-12">\n    \n                                        <div class="row">\n                                            <div class="col-12">\n                                                <div class="row tab">\n                                                    <form class="col-12 " id="pin-recovery-form">\n                                                        <div class="row p-3" >\n                                                            <div class="flex-1">\n                                                                <div class="col-12 form-content">\n                                                                    <div class="row justify-content-center result-container"></div>\n                                                                    <div class="row pb-2 justify-content-around">\n                                                                        <p class="msg">${this.msg}</p>\n                                                                    </div>\n                                                    \n                                                                    <div class="row justify-content-center">\n                                                                        <div class="check-animation">\n                                                                            <svg width="150" height="150"   id="circle-check" class="svg">\n                                                                                <path id="draw-circle" class="strokes one" stroke-width="4" fill="transparent" d="M 75, 75  m -50, 0 a 50, 50 0 1, 0 100, 0 a 50, 50 0 1, 0 -100, 0\n                                                                                "/>\n                                                                                <path id="draw-check" class="strokes two" d="M 50, 80 L 65, 95 L 95, 60"  stroke-width="4" fill="transparent"/>\n                                                                            </svg>\n                                                                        </div>\n                                                                    </div>\n                                                                </div>\n                                                            </div>\n                                                        </div>\n    \n                                                        <div class="row justify-content-center">\n                                                            <div class="col-12">\n                                                                <div class="row justify-content-around pt-3">\n                                                                    \n                                                                    <button type="button" class="btn btn-light col-5 col-sm-3 col-md-3 primary close-modal">Close</button>\n                                                                </div>\n                                                            </div>\n                                                        </div>\t            \t\t\t\t\t\t\n                                                    </form>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    `}}).view()),e()})}static TransactionSuccess(s=null,t=""){PageLessModal.Open(new PageLessComponent("transaction-success-modal",{data:{title:null==s?"Transaction Successful":s,text:t},view:function(){return`\n                    <div class="custom-modal-container p-2">\n                        <div class="col-12 com-sm-12 col-md-8 col-lg-8 col-xl-5 custom-modal">\n                            <div class="row modal-header-container p-3">\n                                <div class="col-12 custom-modal-header ">\n                                    <span class="h5"><span class="fad fa-shield-check text-t-blue"></span>&emsp;<span class="title">${this.title}</span></span>\n                                    <button class="btn-circle btn-clean text-danger custom-modal-close-button d-none"><i class="fa fa-times"></i></button>\n                                </div>\n                            </div>\n\n                            <div class="row custom-modal-body p-2 pt-0 pb-0">\n                                <div class="col-12">\n                                    <div class="row p-3" >\n                                        <div class="flex-1">\n                                            <div class="col-12 form-content">\n                                                <div class="row justify-content-center result-container"></div>\n                                                <div class="row pb-2 justify-content-around">\n                                                    <p class="text">${this.text}</p>\n                                                </div>\n                                \n                                                <div class="row justify-content-center">\n                                                    <div class="check-animation">\n                                                        <svg width="150" height="150"   id="circle-check" class="svg">\n                                                            <path id="draw-circle" class="strokes one" stroke-width="4" fill="transparent" d="M 75, 75  m -50, 0 a 50, 50 0 1, 0 100, 0 a 50, 50 0 1, 0 -100, 0\n                                                            "/>\n                                                            <path id="draw-check" class="strokes two" d="M 50, 80 L 65, 95 L 95, 60"  stroke-width="4" fill="transparent"/>\n                                                        </svg>\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\t            \t\t\t\t\t\t\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                `}}).view())}static BuildForm(s,t=null){return new Promise(e=>{PageLessModal.Open(new PageLessComponent("form-builder",{data:{title:null!=s.title?s.title:"Form",icon:null!=s.icon?s.icon:"file-alt",inputs:null!=s.inputs?s.inputs:"",description:null!=s.description?s.description:"",submitText:null!=s.submitText?s.submitText:"Complete",closeText:null!=s.closeText?s.closeText:"Close",closable:null!=s.closable&&s.closable,autoClose:null==s.autoClose||s.autoClose,noClose:null!=s.noClose&&s.noClose,noSubmit:null!=s.noSubmit&&s.noSubmit,sentProps:null!=s.props&&s.props,values:{},handler:"function"==typeof t?t:null},props:{onsubmit:function(s){s.preventDefault();let t={selects:this.querySelectorAll("select"),inputs:this.querySelectorAll("input"),textarea:this.querySelectorAll("textarea"),checkboxes:this.querySelectorAll("checkbox"),radios:this.querySelectorAll("radio")};this.values={};for(const s in t)if(Object.hasOwnProperty.call(t,s)){const e=t[s];e.length>=1&&e.forEach(s=>{let t=s.getAttribute("type");if("checkbox"==t)this.values[s.getAttribute("id")]=s.checked;else if("radio"==t){let t=this.querySelector(`input#${s.getAttribute("id")}[type=radio]:checked`);this.values[s.getAttribute("id")]=null!==t?t.value:null}else this.values[s.getAttribute("id")]=s.value})}this.values.modal=this,this.values.submitBtn=this.querySelector("button[type=submit]"),null!==this.handler?this.handler(this.values):e(this.values),!0===this.autoClose&&PageLessModal.Close(this)}},view:function(){return`\n                        <form class="custom-modal-container p-2 ${!0===this.closable?"closable":""}" onsubmit={this.props.onsubmit}>\n                            <div class="col-12 com-sm-12 col-md-8 col-lg-8 col-xl-5 custom-modal d-flex flex-column">\n                                <div class="row modal-header-container p-3">\n                                    <div class="col-12 custom-modal-header ">\n                                        <span class="h6"><span class="fad fa-${this.icon} text-t-blue"></span>&emsp;${this.title}</span>\n                                        <button type="button" class="btn-circle btn-clean text-danger custom-modal-close-button d-none"><i class="fa fa-times"></i></button>\n                                    </div>\n                                </div>\n    \n                                <div class="row custom-modal-body p-2 pt-0 pb-0 flex-1 scroll-y">\n                                    <div class="col-12">\n                                        <div class="row alert-container px-3"></div>\n    \n                                        <div class="w-100 d-flex p-2 pb-0 no-gutters">\n                                            <div class="w-100 d-flex flex-column animated fadeIn fast">\n                                                <div class="w-100 pb-2  ${""==this.description?"display-none":""}">\n                                                    <p>${this.description}</p>\n                                                </div>\n                                                ${this.inputs}\n                                            </div>\n                                        </div>\n                                    </div>\n                                </div>\n                                <div class="row no-gutters ${!1!==this.noClose||!1!==this.noSubmit?"justify-content-center":"justify-content-end"} pt-3 pb-3">\n                                    ${!1===this.noClose?`<button type="button" class="btn btn-muted col-5 col-sm-3 col-md-3 switch-mode animated fadeIn faster close-modal">${this.closeText}</button>&emsp;`:""}\n                                    ${!1===this.noSubmit?`<progress-button type="submit" classname="btn btn-primary col-5 col-sm-3 col-md-3 animated fadeIn faster" progresstype="warning" text="${this.submitText}"></progress-button>`:""}\n\n                                </div>\n                            </div>\n                        </form>\n                    `},callback:function(){if(!1!==this.sentProps&&"object"==typeof this.sentProps)for(const s in this.sentProps)if(Object.hasOwnProperty.call(this.sentProps,s)){const t=this.sentProps[s];"function"==typeof t&&(this.props[s]=t)}}}).view())})}}